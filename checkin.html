<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Check-in digital ‚Äì Conciergerie Zenata</title>

  <!-- Optional: keep your existing premium.css if you want -->
  <link rel="stylesheet" href="/assets/premium.css"/>
  <link rel="stylesheet" href="/checkin.css"/>

  <!-- Optional: nicer font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
  <div class="cz-app">
    <!-- Top bar -->
    <header class="cz-topbar">
      <a class="cz-logo" href="/" aria-label="Conciergerie Zenata">
        <span class="cz-logoMark"></span>
        <span class="cz-logoText">Conciergerie Zenata</span>
      </a>

      <div class="cz-topMeta">
        <div class="cz-topMetaTitle">Check-in digital</div>
        <div class="cz-topMetaSub" id="topPropertyName">‚Äî</div>
      </div>
    </header>

    <!-- Progress -->
    <section class="cz-progressWrap" aria-label="Progression">
      <div class="cz-progressBar">
        <div class="cz-progressFill" id="progressFill" style="width:0%"></div>
      </div>
      <div class="cz-progressRow">
        <div class="cz-progressTitle" id="progressTitle">Pr√©paration‚Ä¶</div>
        <div class="cz-progressStep" id="progressStep">0/6</div>
      </div>

      <!-- Keep steps for your JS (it fills #steps). We'll style it lightly -->
      <div class="cz-stepPills" id="steps"></div>
    </section>

    <!-- Main card -->
    <main class="cz-shell">
      <div class="cz-card">

        <!-- LOADING -->
        <section id="screen-loading" class="cz-screen">
          <div class="cz-hero">
            <div class="cz-heroIcon">‚è≥</div>
            <h1 class="cz-h1">Pr√©paration du check-in</h1>
            <p class="cz-sub">Nous chargeons vos informations‚Ä¶</p>
          </div>
          <div class="cz-skeleton"></div>
          <div class="cz-skeleton"></div>
          <div class="cz-skeleton small"></div>
        </section>

        <!-- ERROR -->
        <section id="screen-error" class="cz-screen cz-hide">
          <div class="cz-hero">
            <div class="cz-heroIcon danger">‚ö†Ô∏è</div>
            <h1 class="cz-h1">Lien invalide</h1>
            <p id="errorText" class="cz-sub"></p>
          </div>
          <div class="cz-callout">
            <strong>Besoin d‚Äôaide ?</strong>
            <div class="cz-sub">Contactez votre h√¥te ou demandez un nouveau lien.</div>
          </div>
        </section>

        <!-- CONSENT / WELCOME -->
        <section id="screen-consent" class="cz-screen cz-hide">
          <div class="cz-hero">
            <div class="cz-heroIcon">üëã</div>
            <h1 class="cz-h1">Bienvenue</h1>
            <p class="cz-sub">
              Ce check-in prend <strong>~3 minutes</strong>. Vos donn√©es sont trait√©es de fa√ßon s√©curis√©e.
            </p>
          </div>

          <div class="cz-infoGrid">
            <div class="cz-infoItem">
              <div class="cz-infoLabel">Logement</div>
              <div class="cz-infoValue"><input id="propertyName" class="cz-input cz-inputRead" disabled /></div>
            </div>

            <div class="cz-infoItem">
              <div class="cz-infoLabel">Dates</div>
              <div class="cz-infoValue"><input id="stayDates" class="cz-input cz-inputRead" disabled /></div>
            </div>
          </div>

          <div class="cz-callout">
            <div class="cz-badges">
              <span class="cz-badge">üîí S√©curis√©</span>
              <span class="cz-badge">üõÇ Conforme</span>
              <span class="cz-badge">üì± Mobile</span>
            </div>
            <div class="cz-sub" style="margin-top:8px">
              Merci de confirmer votre accord pour poursuivre.
            </div>
          </div>

          <label class="cz-check">
            <input type="checkbox" id="consent"/>
            <span>
              J‚Äôaccepte la collecte et le traitement de mes donn√©es pour la gestion du s√©jour et les obligations l√©gales.
            </span>
          </label>

          <button class="cz-btn cz-btnPrimary" id="btnStart">Commencer</button>

          <div class="cz-footnote">
            Vous pourrez modifier vos informations avant validation.
          </div>
        </section>

        <!-- GUEST -->
        <section id="screen-guest" class="cz-screen cz-hide">
          <div class="cz-titleRow">
            <div>
              <h1 class="cz-h1">Voyageur <span id="guestIndexLabel"></span></h1>
              <p class="cz-sub">Merci de renseigner exactement comme sur la pi√®ce d‚Äôidentit√©.</p>
            </div>
          </div>

          <div class="cz-section">
            <div class="cz-sectionTitle">Identit√©</div>

            <div class="cz-grid2">
              <div>
                <label class="cz-label">Nom</label>
                <input id="g_last" class="cz-input" autocomplete="family-name" placeholder="Ex: EL AMRANI"/>
              </div>
              <div>
                <label class="cz-label">Pr√©nom</label>
                <input id="g_first" class="cz-input" autocomplete="given-name" placeholder="Ex: Sara"/>
              </div>

              <div>
                <label class="cz-label">Sexe</label>
                <select id="g_sex" class="cz-input">
                  <option value="">‚Äî</option>
                  <option value="M">M</option>
                  <option value="F">F</option>
                </select>
              </div>

              <div>
                <label class="cz-label">Nationalit√©</label>
                <input id="g_nationality" class="cz-input" placeholder="Ex: Marocaine"/>
              </div>

              <div>
                <label class="cz-label">Date de naissance</label>
                <input id="g_dob" class="cz-input" type="date"/>
              </div>

              <div>
                <label class="cz-label">Pays de r√©sidence</label>
                <input id="g_res_country" class="cz-input" placeholder="Ex: Maroc"/>
              </div>

              <div>
                <label class="cz-label">Ville de r√©sidence</label>
                <input id="g_res_city" class="cz-input" placeholder="Ex: Casablanca"/>
              </div>

              <div>
                <label class="cz-label">Domicile habituel</label>
                <input id="g_address" class="cz-input" placeholder="Adresse (si applicable)"/>
              </div>
            </div>
          </div>

          <div class="cz-section">
            <div class="cz-sectionTitle">Pi√®ce d‚Äôidentit√©</div>

            <div class="cz-grid2">
              <div>
                <label class="cz-label">Type</label>
                <select id="g_id_type" class="cz-input">
                  <option value="">‚Äî</option>
                  <option value="CNIE">CNIE</option>
                  <option value="PASSPORT">Passeport</option>
                  <option value="RESIDENCE">Titre de s√©jour</option>
                  <option value="OTHER">Autre</option>
                </select>
              </div>

              <div>
                <label class="cz-label">Num√©ro</label>
                <input id="g_id_number" class="cz-input" placeholder="Ex: AB123456"/>
              </div>
            </div>

            <div class="cz-uploadGrid">
              <div class="cz-upload">
                <div class="cz-uploadHead">
                  <div class="cz-uploadTitle">Face 1</div>
                  <div class="cz-uploadHint">Photo lisible</div>
                </div>
                <input type="file" id="doc_front" class="cz-file" accept="image/*,.pdf"/>
              </div>

              <div class="cz-upload">
                <div class="cz-uploadHead">
                  <div class="cz-uploadTitle">Face 2</div>
                  <div class="cz-uploadHint">Si n√©cessaire</div>
                </div>
                <input
                    type="file"
                    id="doc_front"
                    class="cz-file"
                    accept="image/*,.pdf"
                    capture="environment"
                    />
              </div>
            </div>

            <div class="cz-callout soft">
              <strong>Conseil</strong>
              <div class="cz-sub">Posez la pi√®ce sur une surface plane, sans reflets.</div>
            </div>
          </div>

          <div class="cz-actions">
            <button class="cz-btn cz-btnGhost" id="btnPrevGuest">Retour</button>
            <button class="cz-btn cz-btnPrimary" id="btnSaveGuest">Enregistrer & continuer</button>
          </div>
        </section>

        <!-- GROUP -->
        <section id="screen-group" class="cz-screen cz-hide">
          <div class="cz-hero compact">
            <div class="cz-heroIcon">üë•</div>
            <h1 class="cz-h1">Voyageurs</h1>
            <p class="cz-sub">Ajoutez tous les voyageurs (adultes et enfants).</p>
          </div>

          <div id="guestList" class="cz-list"></div>

          <div class="cz-actions">
            <button class="cz-btn cz-btnGhost" id="btnAddGuest">+ Ajouter un voyageur</button>
            <button class="cz-btn cz-btnPrimary" id="btnToCouple">Continuer</button>
          </div>
        </section>

        <!-- COUPLE -->
        <section id="screen-couple" class="cz-screen cz-hide">
          <div class="cz-hero compact">
            <div class="cz-heroIcon">üßæ</div>
            <h1 class="cz-h1">Informations compl√©mentaires</h1>
            <p class="cz-sub">
              Pour respecter les r√®gles locales, certains logements peuvent demander un acte de mariage.
            </p>
          </div>

          <div class="cz-callout">
            <strong>Couple marocain</strong>
            <div class="cz-sub">Merci d‚Äôindiquer si vous voyagez en couple marocain.</div>
          </div>

          <label class="cz-check big">
            <input type="checkbox" id="isMoroccanCouple"/>
            <span>Oui, nous sommes un couple marocain</span>
          </label>

          <div id="marriageBox" class="cz-hide">
            <div class="cz-section">
              <div class="cz-sectionTitle">Acte de mariage <span id="marriageHint" class="cz-pill"></span></div>
              <div class="cz-upload single">
                <input type="file" id="doc_marriage" class="cz-file" accept="image/*,.pdf"/>
              </div>
              <div class="cz-footnote">Format photo ou PDF. Veuillez envoyer un document lisible.</div>
            </div>
          </div>

          <div class="cz-actions">
            <button class="cz-btn cz-btnGhost" id="btnBackToGroup">Retour</button>
            <button class="cz-btn cz-btnPrimary" id="btnToSign">Continuer</button>
          </div>
        </section>

        <!-- SIGN -->
        <section id="screen-sign" class="cz-screen cz-hide">
          <div class="cz-hero compact">
            <div class="cz-heroIcon">‚úçÔ∏è</div>
            <h1 class="cz-h1">Signature</h1>
            <p class="cz-sub">
              Presque termin√©. Veuillez signer pour confirmer l‚Äôexactitude des informations.
            </p>
          </div>

          <div class="cz-signWrap">
            <canvas id="sig" class="cz-sign"></canvas>
            <div class="cz-signHint">Signez avec le doigt ou la souris.</div>
          </div>

          <div class="cz-actions">
            <button class="cz-btn cz-btnGhost" id="btnClearSig">Effacer</button>
            <button class="cz-btn cz-btnPrimary" id="btnSubmit">Valider le check-in</button>
          </div>

          <div class="cz-footnote">
            Vos informations resteront confidentielles et utilis√©es uniquement pour le s√©jour.
          </div>
        </section>

        <!-- DONE -->
        <section id="screen-done" class="cz-screen cz-hide">
          <div class="cz-hero">
            <div class="cz-heroIcon success">‚úÖ</div>
            <h1 class="cz-h1">Check-in compl√©t√©</h1>
            <p class="cz-sub">Bienvenue ! Voici vos informations d‚Äôarriv√©e.</p>
          </div>

          <div class="cz-instructionsCard">
            <div class="cz-instructionsHead">
              <div class="cz-instructionsTitle">Instructions d‚Äôacc√®s</div>
              <div class="cz-pill">√Ä conserver</div>
            </div>
            <div id="instructions" class="cz-instructions"></div>
          </div>

          <div class="cz-callout soft">
            <strong>Besoin d‚Äôaide ?</strong>
            <div class="cz-sub">Contactez-nous via WhatsApp si n√©cessaire.</div>
          </div>
        </section>

      </div>
    </main>

    <footer class="cz-footer">
      <div class="cz-footerInner">
        <span>¬© Conciergerie Zenata</span>
        <span class="cz-dot">‚Ä¢</span>
        <span class="cz-muted">Check-in digital</span>
      </div>
    </footer>
  </div>

  <script>
    // Lightweight progress mapping (UI only). No backend change.
    window.__czProgress = {
      consent: { i: 1, t: "Bienvenue" },
      guest:   { i: 2, t: "Voyageur" },
      group:   { i: 3, t: "Voyageurs" },
      couple:  { i: 4, t: "Infos compl√©mentaires" },
      sign:    { i: 5, t: "Signature" },
      done:    { i: 6, t: "Termin√©" }
    };
  </script>

  <script src="/checkin.js"></script>
</body>
</html>
